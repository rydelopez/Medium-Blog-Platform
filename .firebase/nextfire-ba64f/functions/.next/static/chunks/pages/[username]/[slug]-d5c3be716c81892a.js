(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[551],{1367:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[username]/[slug]",function(){return t(5348)}])},9724:function(n,e,t){"use strict";t.d(e,{Z:function(){return a}});var r=t(5893),c=t(1664),s=t.n(c),i=t(7294),u=t(8059);function a(n){let{username:e}=(0,i.useContext)(u.S);return e?n.children:n.fallback||(0,r.jsx)(s(),{href:"/enter",children:"You must be signed in"})}},5348:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return x},default:function(){return j}});var r=t(5893),c=t(6161),s=t.n(c),i=t(1664),u=t.n(i),a=t(3985);function o(n){let{post:e}=n,t="number"==typeof(null==e?void 0:e.createdAt)?new Date(e.createdAt):e.createdAt.toDate();return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h1",{children:null==e?void 0:e.title}),(0,r.jsxs)("span",{className:"text-sm",children:["Written by"," ",(0,r.jsxs)(u(),{href:"/".concat(e.username,"/"),className:"text-info",children:["@",e.username]})," ","on ",t.toISOString()]}),(0,r.jsx)(a.D,{children:null==e?void 0:e.content})]})}var l=t(26),d=t(6552);function h(n){let{postRef:e}=n,t=e.collection("hearts").doc(l.I8.currentUser.uid),[c]=(0,d.ky)(t),s=async()=>{let n=l.I8.currentUser.uid,r=l.RZ.batch();r.update(e,{heartCount:(0,l.nP)(1)}),r.set(t,{uid:n}),await r.commit()},i=async()=>{let n=l.RZ.batch();n.update(e,{heartCount:(0,l.nP)(-1)}),n.delete(t),await n.commit()};return(null==c?void 0:c.exists())?(0,r.jsx)("button",{onClick:i,children:"\uD83D\uDC94 Unheart"}):(0,r.jsx)("button",{onClick:s,children:"\uD83D\uDC97 Heart"})}var f=t(9724),x=!0;function j(n){let e=l.RZ.doc(n.path),[t]=(0,d.Xi)(e),c=t||n.post;return(0,r.jsxs)("main",{className:s().container,children:[(0,r.jsx)("section",{children:(0,r.jsx)(o,{post:c})}),(0,r.jsxs)("aside",{className:"card",children:[(0,r.jsx)("p",{children:(0,r.jsxs)("strong",{children:[c.heartCount||0," \uD83E\uDD0D"]})}),(0,r.jsx)(f.Z,{fallback:(0,r.jsx)(u(),{href:"/enter",children:(0,r.jsx)("button",{children:"\uD83D\uDC97 Sign Up"})}),children:(0,r.jsx)(h,{postRef:e})})]})]})}},6161:function(n){n.exports={container:"Post_container__jmeoa"}}},function(n){n.O(0,[432,774,888,179],function(){return n(n.s=1367)}),_N_E=n.O()}]);